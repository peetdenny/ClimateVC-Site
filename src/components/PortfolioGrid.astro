---
import type { PortfolioItem } from '../content/siteData';

interface Props {
  items: PortfolioItem[];
}

const { items } = Astro.props;
const base = import.meta.env.BASE_URL.endsWith('/') ? import.meta.env.BASE_URL : `${import.meta.env.BASE_URL}/`;
---

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
  {items.map((item) => (
    <a 
      href={item.url || '#'} 
      target={item.url ? '_blank' : undefined}
      rel={item.url ? 'noopener noreferrer' : undefined}
      class="portfolio-card group"
    >
      <div class="bg-charcoal-800 rounded-lg overflow-hidden border border-charcoal-700 hover:border-mint-400 transition-all duration-300 h-full flex flex-col">
        <div class="aspect-video bg-charcoal-700 flex items-center justify-center p-8">
          <img 
            src={`${base}${item.logoPath}`} 
            alt={`${item.name} logo`}
            class="max-w-full max-h-full object-contain"
            loading="lazy"
          />
        </div>
        <div class="p-6 flex-1 flex flex-col">
          <div class="mb-2">
            <span class="text-xs uppercase tracking-wider text-mint-400 font-semibold">
              {item.category}
            </span>
          </div>
          <h3 class="text-2xl font-bold text-white mb-3 group-hover:text-mint-400 transition-colors">
            {item.name}
          </h3>
          <p class="text-gray-400 text-sm leading-relaxed flex-1">
            {item.description}
          </p>
          {item.url && (
            <div class="mt-4 flex items-center text-mint-400 text-sm font-medium">
              <span>Visit site</span>
              <svg class="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
              </svg>
            </div>
          )}
        </div>
      </div>
    </a>
  ))}
</div>

<style>
  .portfolio-card {
    @apply block;
  }
</style>

